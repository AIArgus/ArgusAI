Add settings validation and processing